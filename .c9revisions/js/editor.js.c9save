{"ts":1357302338157,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"var Editor={\r\n\r\n\tmenu:[],\r\n\tinitialized:false,\r\n\tdebug:true,\r\n\tdeleteModeStatus:false,\r\n\tinit:function()\r\n\t{\r\n\t\tthis.initialized=true;\r\n\t\tvar html='';\r\n\t\t\r\n\t\t//check if we are editing a map or we are creating a new one\r\n\t\tif($('#'+Map.mapDiv).length<1){\r\n\t\t\tif(Map.initialized){\r\n\t\t\t\talert('something went wrong, map class initialized, no map found');return false;\r\n\t\t\t}\r\n\t\t\thtml='<div id=\"firstMenu\"><h2>Map Editor</h2><br>Â¿What do you wanna do?<br><div>'+\r\n\t\t\t\t\t    '<div class=\"border option\">Edit existing map<hr><textarea id=\"mapCode\" rows=\"10\">{\"areas\":{\"area0\":[{\"name\":\"teleport_area\",\"x\":0,\"y\":96,\"id\":0,\"to\":1},{\"name\":\"cave_land\",\"x\":288,\"y\":57},{\"name\":\"cave_land\",\"x\":288,\"y\":28},{\"name\":\"cave_land\",\"x\":288,\"y\":0},{\"name\":\"cave_land\",\"x\":241,\"y\":0},{\"name\":\"cave_land\",\"x\":288,\"y\":89},{\"name\":\"playerSpawn\",\"x\":302,\"y\":17},{\"name\":\"cave_land\",\"x\":242,\"y\":93},{\"name\":\"cave_land\",\"x\":194,\"y\":62},{\"name\":\"cave_land\",\"x\":241,\"y\":62},{\"name\":\"cave_land\",\"x\":243,\"y\":32},{\"name\":\"cave_land\",\"x\":195,\"y\":32},{\"name\":\"cave_land\",\"x\":195,\"y\":0},{\"name\":\"cave_land\",\"x\":194,\"y\":94},{\"name\":\"cave_land\",\"x\":288,\"y\":120},{\"name\":\"cave_land\",\"x\":241,\"y\":124},{\"name\":\"cave_land\",\"x\":194,\"y\":125},{\"name\":\"cave_land\",\"x\":288,\"y\":208},{\"name\":\"cave_land\",\"x\":240,\"y\":208},{\"name\":\"cave_land\",\"x\":192,\"y\":208},{\"name\":\"cave_land\",\"x\":288,\"y\":180},{\"name\":\"cave_land\",\"x\":288,\"y\":150},{\"name\":\"cave_land\",\"x\":241,\"y\":153},{\"name\":\"cave_land\",\"x\":240,\"y\":176},{\"name\":\"cave_land\",\"x\":193,\"y\":157},{\"name\":\"cave_land\",\"x\":193,\"y\":178},{\"name\":\"cave_land\",\"x\":147,\"y\":180},{\"name\":\"cave_land\",\"x\":148,\"y\":148},{\"name\":\"cave_land\",\"x\":148,\"y\":118},{\"name\":\"cave_land\",\"x\":147,\"y\":87},{\"name\":\"cave_land\",\"x\":146,\"y\":57},{\"name\":\"cave_land\",\"x\":147,\"y\":31},{\"name\":\"cave_land\",\"x\":149,\"y\":0},{\"name\":\"cave_land\",\"x\":102,\"y\":119},{\"name\":\"cave_land\",\"x\":102,\"y\":149},{\"name\":\"cave_land\",\"x\":99,\"y\":181},{\"name\":\"cave_land\",\"x\":100,\"y\":208},{\"name\":\"cave_land\",\"x\":145,\"y\":208},{\"name\":\"grass_land\",\"x\":101,\"y\":0},{\"name\":\"grass_land\",\"x\":88,\"y\":0},{\"name\":\"grass_land\",\"x\":44,\"y\":0},{\"name\":\"grass_land\",\"x\":0,\"y\":0},{\"name\":\"grass_land\",\"x\":102,\"y\":22},{\"name\":\"grass_land\",\"x\":92,\"y\":22},{\"name\":\"grass_land\",\"x\":46,\"y\":22},{\"name\":\"grass_land\",\"x\":0,\"y\":19},{\"name\":\"grass_land\",\"x\":61,\"y\":44},{\"name\":\"grass_land\",\"x\":0,\"y\":61},{\"name\":\"grass_land\",\"x\":100,\"y\":45},{\"name\":\"grass_land\",\"x\":0,\"y\":41},{\"name\":\"grass_land\",\"x\":99,\"y\":94},{\"name\":\"grass_land\",\"x\":61,\"y\":65},{\"name\":\"grass_land\",\"x\":100,\"y\":70},{\"name\":\"grass_land\",\"x\":37,\"y\":46},{\"name\":\"grass_land\",\"x\":0,\"y\":86},{\"name\":\"grass_land\",\"x\":44,\"y\":85},{\"name\":\"grass_land\",\"x\":24,\"y\":68},{\"name\":\"grass_land\",\"x\":72,\"y\":87},{\"name\":\"building_modern2\",\"x\":6,\"y\":0},{\"name\":\"cave_rock2\",\"x\":268,\"y\":86},{\"name\":\"cave_rock2\",\"x\":217,\"y\":162},{\"name\":\"cave_rock1\",\"x\":194,\"y\":52},{\"name\":\"grass_border2\",\"x\":30,\"y\":101},{\"name\":\"grass_border2\",\"x\":32,\"y\":143},{\"name\":\"cave_rock1\",\"x\":230,\"y\":221},{\"name\":\"cave_rock1\",\"x\":214,\"y\":212},{\"name\":\"cave_rock1\",\"x\":215,\"y\":195},{\"name\":\"cave_rock1\",\"x\":217,\"y\":178}],\"area1\":{},\"area2\":[{\"name\":\"grass_land\",\"x\":55,\"y\":40},{\"name\":\"grass_land\",\"x\":55,\"y\":40},{\"name\":\"grass_land\",\"x\":179,\"y\":215},{\"name\":\"grass_land\",\"x\":288,\"y\":215},{\"name\":\"grass_bridge1\",\"x\":55,\"y\":40},{\"name\":\"playerSpawn\",\"x\":251,\"y\":217},{\"name\":\"teleport_area\",\"x\":305,\"y\":0,\"id\":1,\"to\":0}],\"area3\":{}}}</textarea><button onclick=\"Editor.loadMap();\">Load map</button></div>'+\r\n\t\t\t\t\t    '<div class=\"border option\" >Create new map<hr><br><br>How many areas will have?<input id=\"numAreas\" type=\"text\"><button onclick=\"Editor.createSchema();\">Create map</button></div>'+\r\n\t\t\t\t'</div></div>';\r\n\t\t\t$('body').prepend(html);\r\n\t\t\treturn false;\r\n\t\t}else{\r\n\t\t\t$('#firstMenu').remove();\r\n\t\t}\r\n\t\t\r\n\t\t//setup basic html\r\n\t\thtml='<div id=\"mapEditor\">'+\r\n\t\t\t\t'<button onclick=\"Editor.generateMap();\">Generate map code</button><br><button style=\"float:right\"onclick=\"Editor.deleteMode();\">Delete mode: <span id=\"deleteModeStatus\">OFF</span></button>'+\r\n\t\t\t\t'<div id=\"items\" class=\"editorMode\"></div>'+\r\n\t\t\t'</div>';\r\n\t\t$('body').append(html);\r\n\t\t\r\n\t\t// making select for area switch\r\n\t\thtml='<select id=\"areaSelect\"class=\"menu\" onchange=\"Map.changeArea(this.value);\">';\r\n\t\tif(typeof Map.areas =='undefined'){alert('Invalid map data. [No areas found]');return false;}\r\n\t\t\r\n\t\tfor(k in Map.areas){\r\n\t\t\tvar selected='';\r\n\t\t\tif(k==0){\r\n\t\t\t\tselected='selected=\"selected\"';\r\n\t\t\t}\r\n\t\t\thtml+='<option '+selected+' value=\"'+k+'\">'+k+'</option>';\r\n\t\t}\r\n\t\thtml+='</select>';\r\n\t\t$('#mapEditor').prepend(html);\r\n\t\t//---\r\n\t\t\r\n\t\t// making scenario select\r\n\t\tfor(k in items){\r\n\t\t\tvar itm=items[k];\r\n\t\t\tif(typeof this.menu[itm.scenario] =='undefined'){\r\n\t\t\t\tthis.menu[itm.scenario]=[];\r\n\t\t\t}\r\n\t\t\titm.name=k;\r\n\t\t\tthis.menu[itm.scenario][this.menu[itm.scenario].length]=itm;\r\n\t\t}\r\n\t\t\r\n\t\thtml='<select class=\"menu\" onchange=\"Editor.loadScenario(this.value);\"><option value=\"-1\">Select scenario</option>';\r\n\t\tfor(k in this.menu){\r\n\t\t\thtml+='<option value=\"'+k+'\">'+k+'</option>';\r\n\t\t}\r\n\t\thtml+='</select>';\r\n\t\t$('#mapEditor').prepend(html);\r\n\t\t//--------\r\n\t\t\r\n\t\t$(\"#myPlayer img\" ).draggable({ containment: \"#currentMap\", obstacle: \"item\", preventCollision: true });\r\n\t\t\r\n\t\t// detecting clicks on interactive items\r\n\t\t$('body')\r\n\t\t\t.on('click.Teleport', 'item[type=teleport]', function() \r\n\t\t\t{\r\n\t\t\t\tvar id=parseInt($(this).attr('teleportid')),\r\n\t\t\t\t\tto=parseInt($(this).attr('to'));\r\n\t\t\t\t\thtml='<div id=\"teleportSelect\" class=\"border\">Select teleport destination for '+id+': <select onchange=\"Editor.modTeleport('+id+',this.value);\" class=\"menu\"><option value=\"-1\">---</option>',\r\n\t\t\t\t\tarea=$('#areaSelect :selected').text();\r\n\t\t\t\t\r\n\t\t\t\t//search all available teleports\r\n\t\t\t\tfor(k in Map.areas)\r\n\t\t\t\t{\r\n\t\t\t\t\tfor(o in Map.areas[k])\r\n\t\t\t\t\t{\t\r\n\t\t\t\t\t\tvar preObj=Map.areas[k][o],\r\n\t\t\t\t\t\t\tobj=Item.info(preObj.name);\r\n\t\t\t\t\t\tif(obj.type=='teleport')\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar selected='';\r\n\t\t\t\t\t\t\tif(preObj.id!=id){\r\n\t\t\t\t\t\t\t\tif(preObj.id==to){\r\n\t\t\t\t\t\t\t\t\tselected='selected=\"selected\"';\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\thtml+='<option '+selected+' value=\"'+preObj.id+'\">'+preObj.id+' (in '+k+')</option>';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\thtml+='</select></div>';\r\n\t\t\t\t$('body').prepend(html);\r\n\t\t\t})\r\n\t\t\t.on('click.DeleteMode', '.deleteMode item', function() {\r\n\t\t\t\t$(this).remove();\r\n\t\t\t})\r\n\t\t\t;\r\n\t\t$('#'+Map.mapDiv).bind('DOMNodeInserted DOMNodeRemoved DOMSubtreeModified', function(event) {\r\n\t\t\tEditor.saveMap();\r\n\t\t});\r\n\t\t$('#'+Map.mapDiv).addClass('editorMode');\r\n\t},\r\n\tloadScenario:function(scenario)\r\n\t{\r\n\t\tif(scenario==-1){return false;}\r\n\t\tvar html='';\r\n\t\t\r\n\t\tfor(k in this.menu[scenario]){\r\n\t\t\tvar itm=this.menu[scenario][k],\r\n\t\t\t\tsprite='';\r\n\t\t\t\t\r\n\t\t\tif(typeof itm.sprite !='undefined'){\r\n\t\t\t\tsprite=itm.sprite;\r\n\t\t\t}\r\n\t\t\thtml+='<div class=\"'+sprite+' pointer '+itm.name+'\" onclick=\"Map.addItem({name:\\''+itm.name+'\\',x:55,y:40});\"type=\"'+itm.type+'\"></div>';\r\n\t\t}\r\n\t\t$('#items').html(html);\r\n\t\t$(\"#currentMap item\" ).draggable({ containment: \"#currentMap\", obstacle: \"item\", preventCollision: true });\r\n\t},\r\n\tgenerateArea:function()\r\n\t{\r\n\t\tvar mapCode=[];\r\n\t\t$(\"#currentMap item\").each(function(){\r\n\t\t\tvar name=$(this).attr('name'),\r\n\t\t\t\tx=parseFloat($(this).css('left').replace(/[^-\\d\\.]/g, '')),\r\n\t\t\t\ty=parseFloat($(this).css('top').replace(/[^-\\d\\.]/g, '')),\r\n\t\t\t\tid=parseInt($(this).attr('teleportid'));\r\n\t\t\t\tto=parseInt($(this).attr('to'));\r\n\t\t\t\t\r\n\t\t\tif(typeof name =='undefined'){ //if doesnt have name, it should be players div\r\n\t\t\t\tname='playerPos';\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tmapCode[mapCode.length]={\r\n\t\t\t\tname:name,\r\n\t\t\t\tx:x,\r\n\t\t\t\ty:y,\r\n\t\t\t};\r\n\t\t\tif(id!=null){\r\n\t\t\t\tmapCode[mapCode.length].id=id;\r\n\t\t\t}\r\n\t\t\tif(to!=null){\r\n\t\t\t\tmapCode[mapCode.length].to=to;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t});\r\n\t\treturn mapCode;\r\n\t},\r\n\tgenerateMap:function()\r\n\t{\r\n\t\tif($('#mapEditor textarea').length<1){\r\n\t\t\t$('#mapEditor').append('<textarea>{\"areas\":'+JSON.stringify(Map.areas)+'}</textarea>');\r\n\t\t}else{\r\n\t\t\t$('#mapEditor textarea').text('{\"areas\":'+JSON.stringify(Map.areas)+'}');\r\n\t\t}\r\n\t},\r\n\tcreateSchema:function()\r\n\t{\r\n\t\t//validating input\r\n\t\tif($('#numAreas').length<1 || $('#numAreas').val()==''){return false;}\r\n\t\tvar num=parseInt($('#numAreas').val().replace(/[^-\\d\\.]/g, '')),\r\n\t\t\ti=0,\r\n\t\t\tschema={\"areas\":{}};\r\n\t\tif(num<1){return false;}\r\n\t\t//-- \r\n\t\t\r\n\t\twhile(i<num){\r\n\t\t\tschema.areas['area'+i]={};\r\n\t\t\ti++;\r\n\t\t}\r\n\t\tMap.init(schema);\r\n\t\tEditor.init();\r\n\t},\r\n\tsaveMap:function()\r\n\t{\r\n\t\tif(Map.loadingArea){return false;}\r\n\t\tvar area=$('#areaSelect :selected').text(),\r\n\t\t\tcode=Editor.generateArea();\r\n\t\tif(typeof code =='undefined' || code == '' || code =='[]'){\r\n\t\t\treturn false;//he didnt even start\r\n\t\t}\r\n\t\t\r\n\t\t//--saving div\r\n\t\tif($('#editorSaving').length>0){\r\n\t\t\t$('#editorSaving').show();\r\n\t\t}else{\r\n\t\t\t$('body').append('<div id=\"editorSaving\" class=\"border\"><img src=\"images/loading.gif\"/> Saving area...</div>');\r\n\t\t}\r\n\t\t\r\n\t\tif(Map.loadingArea){return false;}\r\n\t\tMap.areas[area]=code;\r\n\t\tsetTimeout(\"$('#editorSaving').hide();\",1000);\r\n\t},\r\n\tloadMap:function()\r\n\t{\r\n\t\tif($('#mapCode').length<1 || $('#mapCode').val()==''){return false;}\r\n\t\tMap.init(jQuery.parseJSON($('#mapCode').val()));\r\n\t\tEditor.init();\r\n\t},\r\n\tdeleteMode:function()\r\n\t{\r\n\t\tvar mode='';\r\n\t\tif(this.deleteModeStatus)\r\n\t\t{\r\n\t\t\t$('#'+Map.mapDiv).removeClass('deleteMode');\r\n\t\t\tthis.deleteModeStatus=false;\r\n\t\t\tmode='OFF';\r\n\t\t}else{\r\n\t\t\t$('#'+Map.mapDiv).addClass('deleteMode');\r\n\t\t\tthis.deleteModeStatus=true;\r\n\t\t\tmode='ON';\r\n\t\t}\r\n\t\t$('#deleteModeStatus').html(mode);\r\n\t},\r\n\tmodTeleport:function(teleportId,to)\r\n\t{\r\n\t\tif(teleportId==-1){return false;}\r\n\t\t$('[teleportid='+teleportId+']').attr('to',to);\r\n\t\t$('#teleportSelect').remove();\r\n\t}\r\n};"]],"start1":0,"start2":0,"length1":0,"length2":9644}]],"length":9644}
{"contributors":[],"silentsave":false,"ts":1357302339945,"patch":[[{"diffs":[[0,"or={"],[-1,"\r\n\r\n\t"],[1,"\n\n    "],[0,"menu:[],"],[-1,"\r"],[0,"\n\tin"]],"start1":8,"start2":8,"length1":22,"length2":22},{"diffs":[[0,"d:false,"],[-1,"\r"],[0,"\n\tdebug:"]],"start1":38,"start2":38,"length1":17,"length2":16},{"diffs":[[0,"ug:true,"],[-1,"\r"],[0,"\n\tdelete"]],"start1":51,"start2":51,"length1":17,"length2":16},{"diffs":[[0,"s:false,"],[-1,"\r"],[0,"\n\tinit:f"]],"start1":76,"start2":76,"length1":17,"length2":16},{"diffs":[[0,"nction()"],[-1,"\r"],[0,"\n\t{"],[-1,"\r"],[0,"\n\t\tthis."]],"start1":93,"start2":93,"length1":21,"length2":19},{"diffs":[[0,"ed=true;"],[-1,"\r"],[0,"\n\t\tvar h"]],"start1":121,"start2":121,"length1":17,"length2":16},{"diffs":[[0,"html='';"],[-1,"\r"],[0,"\n\t\t"],[-1,"\r"],[0,"\n\t\t//che"]],"start1":136,"start2":136,"length1":21,"length2":19},{"diffs":[[0," new one"],[-1,"\r"],[0,"\n\t\tif($("]],"start1":202,"start2":202,"length1":17,"length2":16},{"diffs":[[0,").length<1){"],[-1,"\r"],[0,"\n\t\t\tif(Map.i"]],"start1":232,"start2":232,"length1":25,"length2":24},{"diffs":[[0,"alized){"],[-1,"\r"],[0,"\n\t\t\t\tale"]],"start1":260,"start2":260,"length1":17,"length2":16},{"diffs":[[0,"eturn false;"],[-1,"\r"],[0,"\n\t\t\t}"],[-1,"\r"],[0,"\n\t\t\thtml='<d"]],"start1":341,"start2":341,"length1":31,"length2":29},{"diffs":[[0,"?<br><div>'+"],[-1,"\r"],[0,"\n\t\t\t\t\t    '<"]],"start1":432,"start2":432,"length1":25,"length2":24},{"diffs":[[0,"ton></div>'+"],[-1,"\r"],[0,"\n\t\t\t\t\t    '<"]],"start1":3428,"start2":3428,"length1":25,"length2":24},{"diffs":[[0,"ton></div>'+"],[-1,"\r"],[0,"\n\t\t\t\t'</div>"]],"start1":3619,"start2":3619,"length1":25,"length2":24},{"diffs":[[0,"div></div>';"],[-1,"\r"],[0,"\n\t\t\t$('body'"]],"start1":3639,"start2":3639,"length1":25,"length2":24},{"diffs":[[0,"epend(html);"],[-1,"\r"],[0,"\n\t\t\treturn f"]],"start1":3667,"start2":3667,"length1":25,"length2":24},{"diffs":[[0,"n false;"],[-1,"\r"],[0,"\n\t\t}else"]],"start1":3688,"start2":3688,"length1":17,"length2":16},{"diffs":[[0," false;\n\t\t}else{"],[-1,"\r"],[0,"\n\t\t\t$('#firstMen"]],"start1":3689,"start2":3689,"length1":33,"length2":32},{"diffs":[[0,"emove();"],[-1,"\r"],[0,"\n\t\t}"],[-1,"\r"],[0,"\n\t\t"],[-1,"\r"],[0,"\n\t\t//set"]],"start1":3726,"start2":3726,"length1":26,"length2":23},{"diffs":[[0,"sic html"],[-1,"\r"],[0,"\n\t\thtml="]],"start1":3754,"start2":3754,"length1":17,"length2":16},{"diffs":[[0,"itor\">'+"],[-1,"\r"],[0,"\n\t\t\t\t'<b"]],"start1":3785,"start2":3785,"length1":17,"length2":16},{"diffs":[[0,"utton>'+"],[-1,"\r"],[0,"\n\t\t\t\t'<d"]],"start1":3981,"start2":3981,"length1":17,"length2":16},{"diffs":[[0,"</div>'+"],[-1,"\r"],[0,"\n\t\t\t'</d"]],"start1":4030,"start2":4030,"length1":17,"length2":16},{"diffs":[[0,"</div>';"],[-1,"\r"],[0,"\n\t\t$('bo"]],"start1":4043,"start2":4043,"length1":17,"length2":16},{"diffs":[[0,"d(html);"],[-1,"\r"],[0,"\n\t\t"],[-1,"\r"],[0,"\n\t\t// ma"]],"start1":4069,"start2":4069,"length1":21,"length2":19},{"diffs":[[0,"a switch"],[-1,"\r"],[0,"\n\t\thtml="]],"start1":4107,"start2":4107,"length1":17,"length2":16},{"diffs":[[0,"ue);\">';"],[-1,"\r"],[0,"\n\t\tif(ty"]],"start1":4193,"start2":4193,"length1":17,"length2":16},{"diffs":[[0," false;}"],[-1,"\r"],[0,"\n\t\t"],[-1,"\r"],[0,"\n\t\tfor(k"]],"start1":4289,"start2":4289,"length1":21,"length2":19},{"diffs":[[0,".areas){"],[-1,"\r"],[0,"\n\t\t\tvar "]],"start1":4315,"start2":4315,"length1":17,"length2":16},{"diffs":[[0,"selected='';"],[-1,"\r"],[0,"\n\t\t\tif(k==0)"]],"start1":4331,"start2":4331,"length1":25,"length2":24},{"diffs":[[0,"f(k==0){"],[-1,"\r"],[0,"\n\t\t\t\tsel"]],"start1":4348,"start2":4348,"length1":17,"length2":16},{"diffs":[[0,"ected\"';"],[-1,"\r"],[0,"\n\t\t\t}"],[-1,"\r"],[0,"\n\t\t\thtml"]],"start1":4384,"start2":4384,"length1":23,"length2":21},{"diffs":[[0,"'+k+'</option>';"],[-1,"\r"],[0,"\n\t\t}"],[-1,"\r"],[0,"\n\t\thtml+='</sele"]],"start1":4443,"start2":4443,"length1":38,"length2":36},{"diffs":[[0,"ml+='</select>';"],[-1,"\r"],[0,"\n\t\t$('#mapEditor"]],"start1":4468,"start2":4468,"length1":33,"length2":32},{"diffs":[[0,"ml);"],[-1,"\r"],[0,"\n\t\t//---"],[-1,"\r"],[0,"\n\t\t"],[-1,"\r"],[0,"\n\t\t/"]],"start1":4513,"start2":4513,"length1":22,"length2":19},{"diffs":[[0,"o select"],[-1,"\r"],[0,"\n\t\tfor(k"]],"start1":4548,"start2":4548,"length1":17,"length2":16},{"diffs":[[0," items){"],[-1,"\r"],[0,"\n\t\t\tvar "]],"start1":4567,"start2":4567,"length1":17,"length2":16},{"diffs":[[0,"tems[k];"],[-1,"\r"],[0,"\n\t\t\tif(t"]],"start1":4588,"start2":4588,"length1":17,"length2":16},{"diffs":[[0,"undefined'){"],[-1,"\r"],[0,"\n\t\t\t\tthis.me"]],"start1":4637,"start2":4637,"length1":25,"length2":24},{"diffs":[[0,"rio]=[];"],[-1,"\r"],[0,"\n\t\t\t}"],[-1,"\r"],[0,"\n\t\t\titm."]],"start1":4673,"start2":4673,"length1":23,"length2":21},{"diffs":[[0,".name=k;"],[-1,"\r"],[0,"\n\t\t\tthis"]],"start1":4693,"start2":4693,"length1":17,"length2":16},{"diffs":[[0,"th]=itm;"],[-1,"\r"],[0,"\n\t\t}"],[-1,"\r"],[0,"\n\t\t"],[-1,"\r"],[0,"\n\t\thtml="]],"start1":4757,"start2":4757,"length1":26,"length2":23},{"diffs":[[0,"ption>';"],[-1,"\r"],[0,"\n\t\tfor(k"]],"start1":4883,"start2":4883,"length1":17,"length2":16},{"diffs":[[0,"s.menu){"],[-1,"\r"],[0,"\n\t\t\thtml"]],"start1":4906,"start2":4906,"length1":17,"length2":16},{"diffs":[[0,"ption>';"],[-1,"\r"],[0,"\n\t\t}"],[-1,"\r"],[0,"\n\t\thtml+"]],"start1":4955,"start2":4955,"length1":22,"length2":20},{"diffs":[[0,"elect>';"],[-1,"\r"],[0,"\n\t\t$('#m"]],"start1":4980,"start2":4980,"length1":17,"length2":16},{"diffs":[[0,"d(html);"],[-1,"\r"],[0,"\n\t\t//---"]],"start1":5013,"start2":5013,"length1":17,"length2":16},{"diffs":[[0,"--------"],[-1,"\r"],[0,"\n\t\t"],[-1,"\r"],[0,"\n\t\t$(\"#m"]],"start1":5026,"start2":5026,"length1":21,"length2":19},{"diffs":[[0,"true });"],[-1,"\r"],[0,"\n\t\t"],[-1,"\r"],[0,"\n\t\t// de"]],"start1":5136,"start2":5136,"length1":21,"length2":19},{"diffs":[[0,"ve items"],[-1,"\r"],[0,"\n\t\t$('bo"]],"start1":5182,"start2":5182,"length1":17,"length2":16},{"diffs":[[0,"('body')"],[-1,"\r"],[0,"\n\t\t\t.on("]],"start1":5194,"start2":5194,"length1":17,"length2":16},{"diffs":[[0,"n() "],[-1,"\r"],[0,"\n\t\t\t{"],[-1,"\r"],[0,"\n\t\t\t"]],"start1":5258,"start2":5258,"length1":15,"length2":13},{"diffs":[[0,"leportid')),"],[-1,"\r"],[0,"\n\t\t\t\t\tto=par"]],"start1":5304,"start2":5304,"length1":25,"length2":24},{"diffs":[[0,"attr('to'));"],[-1,"\r"],[0,"\n\t\t\t\t\thtml='"]],"start1":5342,"start2":5342,"length1":25,"length2":24},{"diffs":[[0,"ption>',"],[-1,"\r"],[0,"\n\t\t\t\t\tar"]],"start1":5542,"start2":5542,"length1":17,"length2":16},{"diffs":[[0,".text();"],[-1,"\r"],[0,"\n\t\t\t\t"],[-1,"\r"],[0,"\n\t\t\t\t//s"]],"start1":5587,"start2":5587,"length1":23,"length2":21},{"diffs":[[0,"eleports"],[-1,"\r"],[0,"\n\t\t\t\tfor"]],"start1":5629,"start2":5629,"length1":17,"length2":16},{"diffs":[[0,"eas)"],[-1,"\r"],[0,"\n\t\t\t\t{"],[-1,"\r"],[0,"\n\t\t\t"]],"start1":5657,"start2":5657,"length1":16,"length2":14},{"diffs":[[0,"[k])"],[-1,"\r"],[0,"\n\t\t\t\t\t{\t"],[-1,"\r"],[0,"\n\t\t\t"]],"start1":5691,"start2":5691,"length1":18,"length2":16},{"diffs":[[0,"s[k][o],"],[-1,"\r"],[0,"\n\t\t\t\t\t\t\t"]],"start1":5729,"start2":5729,"length1":17,"length2":16},{"diffs":[[0,"j.name);"],[-1,"\r"],[0,"\n\t\t\t\t\t\ti"]],"start1":5764,"start2":5764,"length1":17,"length2":16},{"diffs":[[0,"rt')"],[-1,"\r"],[0,"\n\t\t\t\t\t\t{"],[-1,"\r"],[0,"\n\t\t\t"]],"start1":5799,"start2":5799,"length1":18,"length2":16},{"diffs":[[0,"selected='';"],[-1,"\r"],[0,"\n\t\t\t\t\t\t\tif(p"]],"start1":5823,"start2":5823,"length1":25,"length2":24},{"diffs":[[0,"id!=id){"],[-1,"\r"],[0,"\n\t\t\t\t\t\t\t"]],"start1":5853,"start2":5853,"length1":17,"length2":16},{"diffs":[[0,"id==to){"],[-1,"\r"],[0,"\n\t\t\t\t\t\t\t"]],"start1":5880,"start2":5880,"length1":17,"length2":16},{"diffs":[[0,"ected\"';"],[-1,"\r"],[0,"\n\t\t\t\t\t\t\t"]],"start1":5921,"start2":5921,"length1":17,"length2":16},{"diffs":[[0,"';\n\t\t\t\t\t\t\t\t}"],[-1,"\r"],[0,"\n\t\t\t\t\t\t\t\thtm"]],"start1":5927,"start2":5927,"length1":25,"length2":24},{"diffs":[[0,"ption>';"],[-1,"\r"],[0,"\n\t\t\t\t\t\t\t"]],"start1":6025,"start2":6025,"length1":17,"length2":16},{"diffs":[[0,"\t\t\t}"],[-1,"\r"],[0,"\n\t\t\t\t\t\t}"],[-1,"\r"],[0,"\n\t\t\t\t\t}"],[-1,"\r"],[0,"\n\t\t\t\t}"],[-1,"\r"],[0,"\n\t\t\t"]],"start1":6038,"start2":6038,"length1":33,"length2":29},{"diffs":[[0,"</div>';"],[-1,"\r"],[0,"\n\t\t\t\t$('"]],"start1":6084,"start2":6084,"length1":17,"length2":16},{"diffs":[[0,"d(html);"],[-1,"\r"],[0,"\n\t\t\t})"],[-1,"\r"],[0,"\n\t\t\t.on("]],"start1":6113,"start2":6113,"length1":24,"length2":22},{"diffs":[[0,"tion() {"],[-1,"\r"],[0,"\n\t\t\t\t$(t"]],"start1":6179,"start2":6179,"length1":17,"length2":16},{"diffs":[[0,"e();"],[-1,"\r"],[0,"\n\t\t\t})"],[-1,"\r"],[0,"\n\t\t\t;"],[-1,"\r"],[0,"\n\t\t$"]],"start1":6205,"start2":6205,"length1":22,"length2":19},{"diffs":[[0,"event) {"],[-1,"\r"],[0,"\n\t\t\tEdit"]],"start1":6308,"start2":6308,"length1":17,"length2":16},{"diffs":[[0,"veMap();"],[-1,"\r"],[0,"\n\t\t});"],[-1,"\r"],[0,"\n\t\t$('#'"]],"start1":6329,"start2":6329,"length1":24,"length2":22},{"diffs":[[0,"rMode');"],[-1,"\r"],[0,"\n\t},"],[-1,"\r"],[0,"\n\tloadSc"]],"start1":6379,"start2":6379,"length1":22,"length2":20},{"diffs":[[0,"cenario)"],[-1,"\r"],[0,"\n\t{"],[-1,"\r"],[0,"\n\t\tif(sc"]],"start1":6416,"start2":6416,"length1":21,"length2":19},{"diffs":[[0,"turn false;}"],[-1,"\r"],[0,"\n\t\tvar html="]],"start1":6449,"start2":6449,"length1":25,"length2":24},{"diffs":[[0,"html='';"],[-1,"\r"],[0,"\n\t\t"],[-1,"\r"],[0,"\n\t\tfor(k"]],"start1":6468,"start2":6468,"length1":21,"length2":19},{"diffs":[[0,"nario]){"],[-1,"\r"],[0,"\n\t\t\tvar "]],"start1":6504,"start2":6504,"length1":17,"length2":16},{"diffs":[[0,"rio][k],"],[-1,"\r"],[0,"\n\t\t\t\tspr"]],"start1":6539,"start2":6539,"length1":17,"length2":16},{"diffs":[[0,"rite='';"],[-1,"\r"],[0,"\n\t\t\t\t"],[-1,"\r"],[0,"\n\t\t\tif(t"]],"start1":6554,"start2":6554,"length1":23,"length2":21},{"diffs":[[0,"fined'){"],[-1,"\r"],[0,"\n\t\t\t\tspr"]],"start1":6599,"start2":6599,"length1":17,"length2":16},{"diffs":[[0,".sprite;"],[-1,"\r"],[0,"\n\t\t\t}"],[-1,"\r"],[0,"\n\t\t\thtml"]],"start1":6622,"start2":6622,"length1":23,"length2":21},{"diffs":[[0,"</div>';"],[-1,"\r"],[0,"\n\t\t}"],[-1,"\r"],[0,"\n\t\t$('#i"]],"start1":6768,"start2":6768,"length1":22,"length2":20},{"diffs":[[0,"l(html);"],[-1,"\r"],[0,"\n\t\t$(\"#c"]],"start1":6798,"start2":6798,"length1":17,"length2":16},{"diffs":[[0,"true });"],[-1,"\r"],[0,"\n\t},"],[-1,"\r"],[0,"\n\tgenera"]],"start1":6908,"start2":6908,"length1":22,"length2":20},{"diffs":[[0,"eArea:function()"],[-1,"\r"],[0,"\n\t{"],[-1,"\r"],[0,"\n\t\tvar mapCode=["]],"start1":6929,"start2":6929,"length1":37,"length2":35},{"diffs":[[0,"Code=[];"],[-1,"\r"],[0,"\n\t\t$(\"#c"]],"start1":6958,"start2":6958,"length1":17,"length2":16},{"diffs":[[0,"ction(){"],[-1,"\r"],[0,"\n\t\t\tvar "]],"start1":6999,"start2":6999,"length1":17,"length2":16},{"diffs":[[0,"'name'),"],[-1,"\r"],[0,"\n\t\t\t\tx=p"]],"start1":7033,"start2":7033,"length1":17,"length2":16},{"diffs":[[0,"\\.]/g, '')),"],[-1,"\r"],[0,"\n\t\t\t\ty=parse"]],"start1":7093,"start2":7093,"length1":25,"length2":24},{"diffs":[[0,"\\.]/g, '')),"],[-1,"\r"],[0,"\n\t\t\t\tid=pars"]],"start1":7156,"start2":7156,"length1":25,"length2":24},{"diffs":[[0,"leportid'));"],[-1,"\r"],[0,"\n\t\t\t\tto=pars"]],"start1":7201,"start2":7201,"length1":25,"length2":24},{"diffs":[[0,"'));"],[-1,"\r"],[0,"\n\t\t\t\t"],[-1,"\r"],[0,"\n\t\t\t"]],"start1":7246,"start2":7246,"length1":15,"length2":13},{"diffs":[[0,"yers div"],[-1,"\r"],[0,"\n\t\t\t\tnam"]],"start1":7329,"start2":7329,"length1":17,"length2":16},{"diffs":[[0,"yerPos';"],[-1,"\r"],[0,"\n\t\t\t\tret"]],"start1":7351,"start2":7351,"length1":17,"length2":16},{"diffs":[[0,"n false;"],[-1,"\r"],[0,"\n\t\t\t}"],[-1,"\r"],[0,"\n\t\t\tmapC"]],"start1":7369,"start2":7369,"length1":23,"length2":21},{"diffs":[[0,"ength]={"],[-1,"\r"],[0,"\n\t\t\t\tnam"]],"start1":7403,"start2":7403,"length1":17,"length2":16},{"diffs":[[0,"me:name,"],[-1,"\r"],[0,"\n\t\t\t\tx:x"]],"start1":7418,"start2":7418,"length1":17,"length2":16},{"diffs":[[0,"\t\t\t\tx:x,"],[-1,"\r"],[0,"\n\t\t\t\ty:y"]],"start1":7427,"start2":7427,"length1":17,"length2":16},{"diffs":[[0,"y:y,"],[-1,"\r"],[0,"\n\t\t\t};"],[-1,"\r"],[0,"\n\t\t\t"]],"start1":7440,"start2":7440,"length1":16,"length2":14},{"diffs":[[0,"\t\t\tif(id!=null){"],[-1,"\r"],[0,"\n\t\t\t\tmapCode[map"]],"start1":7451,"start2":7451,"length1":33,"length2":32},{"diffs":[[0,"].id=id;"],[-1,"\r"],[0,"\n\t\t\t}"],[-1,"\r"],[0,"\n\t\t\tif(t"]],"start1":7494,"start2":7494,"length1":23,"length2":21},{"diffs":[[0,"!=null){"],[-1,"\r"],[0,"\n\t\t\t\tmap"]],"start1":7516,"start2":7516,"length1":17,"length2":16},{"diffs":[[0,"=to;"],[-1,"\r"],[0,"\n\t\t\t}"],[-1,"\r"],[0,"\n\t\t\t"],[-1,"\r"],[0,"\n\t\t});"],[-1,"\r"],[0,"\n\t\tr"]],"start1":7555,"start2":7555,"length1":27,"length2":23},{"diffs":[[0,"mapCode;"],[-1,"\r"],[0,"\n\t},"],[-1,"\r"],[0,"\n\tgenera"]],"start1":7584,"start2":7584,"length1":22,"length2":20},{"diffs":[[0,"teMap:function()"],[-1,"\r"],[0,"\n\t{"],[-1,"\r"],[0,"\n\t\tif($('#mapEdi"]],"start1":7604,"start2":7604,"length1":37,"length2":35},{"diffs":[[0,"ngth<1){"],[-1,"\r"],[0,"\n\t\t\t$('#"]],"start1":7656,"start2":7656,"length1":17,"length2":16},{"diffs":[[0,"textarea>');"],[-1,"\r"],[0,"\n\t\t}else{\r\n\t"]],"start1":7743,"start2":7743,"length1":25,"length2":24},{"diffs":[[0,"rea>');\n\t\t}else{"],[-1,"\r"],[0,"\n\t\t\t$('#mapEdito"]],"start1":7748,"start2":7748,"length1":33,"length2":32},{"diffs":[[0,"}');"],[-1,"\r"],[0,"\n\t\t}"],[-1,"\r"],[0,"\n\t},"],[-1,"\r"],[0,"\n\tcr"]],"start1":7837,"start2":7837,"length1":19,"length2":16},{"diffs":[[0,"nction()"],[-1,"\r"],[0,"\n\t{"],[-1,"\r"],[0,"\n\t\t//val"]],"start1":7866,"start2":7866,"length1":21,"length2":19},{"diffs":[[0,"ng input"],[-1,"\r"],[0,"\n\t\tif($("]],"start1":7890,"start2":7890,"length1":17,"length2":16},{"diffs":[[0,"turn false;}"],[-1,"\r"],[0,"\n\t\tvar num=p"]],"start1":7959,"start2":7959,"length1":25,"length2":24},{"diffs":[[0,"')),"],[-1,"\r"],[0,"\n\t\t\ti=0,"],[-1,"\r"],[0,"\n\t\t\t"]],"start1":8034,"start2":8034,"length1":18,"length2":16},{"diffs":[[0,"as\":{}};"],[-1,"\r"],[0,"\n\t\tif(nu"]],"start1":8062,"start2":8062,"length1":17,"length2":16},{"diffs":[[0,"se;}"],[-1,"\r"],[0,"\n\t\t//-- "],[-1,"\r"],[0,"\n\t\t"],[-1,"\r"],[0,"\n\t\tw"]],"start1":8093,"start2":8093,"length1":22,"length2":19},{"diffs":[[0,"(i<num){"],[-1,"\r"],[0,"\n\t\t\tsche"]],"start1":8116,"start2":8116,"length1":17,"length2":16},{"diffs":[[0,"={};"],[-1,"\r"],[0,"\n\t\t\ti++;"],[-1,"\r"],[0,"\n\t\t}"],[-1,"\r"],[0,"\n\t\tM"]],"start1":8150,"start2":8150,"length1":23,"length2":20},{"diffs":[[0,"schema);"],[-1,"\r"],[0,"\n\t\tEdito"]],"start1":8178,"start2":8178,"length1":17,"length2":16},{"diffs":[[0,".init();"],[-1,"\r"],[0,"\n\t},"],[-1,"\r"],[0,"\n\tsaveMa"]],"start1":8195,"start2":8195,"length1":22,"length2":20},{"diffs":[[0,"p:function()"],[-1,"\r"],[0,"\n\t{"],[-1,"\r"],[0,"\n\t\tif(Map.lo"]],"start1":8215,"start2":8215,"length1":29,"length2":27},{"diffs":[[0," false;}"],[-1,"\r"],[0,"\n\t\tvar a"]],"start1":8259,"start2":8259,"length1":17,"length2":16},{"diffs":[[0,".text(),"],[-1,"\r"],[0,"\n\t\t\tcode"]],"start1":8305,"start2":8305,"length1":17,"length2":16},{"diffs":[[0,"eArea();"],[-1,"\r"],[0,"\n\t\tif(ty"]],"start1":8336,"start2":8336,"length1":17,"length2":16},{"diffs":[[0,"=='[]'){"],[-1,"\r"],[0,"\n\t\t\tretu"]],"start1":8398,"start2":8398,"length1":17,"length2":16},{"diffs":[[0,"en start"],[-1,"\r"],[0,"\n\t\t}"],[-1,"\r"],[0,"\n\t\t"],[-1,"\r"],[0,"\n\t\t//--s"]],"start1":8436,"start2":8436,"length1":26,"length2":23},{"diffs":[[0,"ving div"],[-1,"\r"],[0,"\n\t\tif($("]],"start1":8460,"start2":8460,"length1":17,"length2":16},{"diffs":[[0,"ngth>0){"],[-1,"\r"],[0,"\n\t\t\t$('#"]],"start1":8495,"start2":8495,"length1":17,"length2":16},{"diffs":[[0,".show();"],[-1,"\r"],[0,"\n\t\t}else"]],"start1":8525,"start2":8525,"length1":17,"length2":16},{"diffs":[[0,"();\n\t\t}else{"],[-1,"\r"],[0,"\n\t\t\t$('body'"]],"start1":8530,"start2":8530,"length1":25,"length2":24},{"diffs":[[0,">');"],[-1,"\r"],[0,"\n\t\t}"],[-1,"\r"],[0,"\n\t\t"],[-1,"\r"],[0,"\n\t\ti"]],"start1":8653,"start2":8653,"length1":18,"length2":15},{"diffs":[[0,"turn false;}"],[-1,"\r"],[0,"\n\t\tMap.areas"]],"start1":8689,"start2":8689,"length1":25,"length2":24},{"diffs":[[0,"a]=code;"],[-1,"\r"],[0,"\n\t\tsetTi"]],"start1":8717,"start2":8717,"length1":17,"length2":16},{"diffs":[[0,"\",1000);"],[-1,"\r"],[0,"\n\t},"],[-1,"\r"],[0,"\n\tloadMa"]],"start1":8766,"start2":8766,"length1":22,"length2":20},{"diffs":[[0,"nction()"],[-1,"\r"],[0,"\n\t{"],[-1,"\r"],[0,"\n\t\tif($("]],"start1":8790,"start2":8790,"length1":21,"length2":19},{"diffs":[[0," false;}"],[-1,"\r"],[0,"\n\t\tMap.i"]],"start1":8864,"start2":8864,"length1":17,"length2":16},{"diffs":[[0,"val()));"],[-1,"\r"],[0,"\n\t\tEdito"]],"start1":8915,"start2":8915,"length1":17,"length2":16},{"diffs":[[0,".init();"],[-1,"\r"],[0,"\n\t},"],[-1,"\r"],[0,"\n\tdelete"]],"start1":8932,"start2":8932,"length1":22,"length2":20},{"diffs":[[0,"nction()"],[-1,"\r"],[0,"\n\t{"],[-1,"\r"],[0,"\n\t\tvar m"]],"start1":8959,"start2":8959,"length1":21,"length2":19},{"diffs":[[0,"mode='';"],[-1,"\r"],[0,"\n\t\tif(th"]],"start1":8977,"start2":8977,"length1":17,"length2":16},{"diffs":[[0,"tus)"],[-1,"\r"],[0,"\n\t\t{"],[-1,"\r"],[0,"\n\t\t\t"]],"start1":9009,"start2":9009,"length1":14,"length2":12},{"diffs":[[0,"s('deleteMode');"],[-1,"\r"],[0,"\n\t\t\tthis.deleteM"]],"start1":9049,"start2":9049,"length1":33,"length2":32},{"diffs":[[0,"s=false;"],[-1,"\r"],[0,"\n\t\t\tmode"]],"start1":9089,"start2":9089,"length1":17,"length2":16},{"diffs":[[0,"e='OFF';"],[-1,"\r"],[0,"\n\t\t}else"]],"start1":9104,"start2":9104,"length1":17,"length2":16},{"diffs":[[0,"\t\t}else{"],[-1,"\r"],[0,"\n\t\t\t$('#"]],"start1":9113,"start2":9113,"length1":17,"length2":16},{"diffs":[[0,"eMode');"],[-1,"\r"],[0,"\n\t\t\tthis"]],"start1":9158,"start2":9158,"length1":17,"length2":16},{"diffs":[[0,"us=true;"],[-1,"\r"],[0,"\n\t\t\tmode"]],"start1":9189,"start2":9189,"length1":17,"length2":16},{"diffs":[[0,"ON';"],[-1,"\r"],[0,"\n\t\t}"],[-1,"\r"],[0,"\n\t\t$"]],"start1":9207,"start2":9207,"length1":14,"length2":12},{"diffs":[[0,"de);"],[-1,"\r"],[0,"\n\t},"],[-1,"\r"],[0,"\n\tmo"]],"start1":9248,"start2":9248,"length1":14,"length2":12},{"diffs":[[0,",to)"],[-1,"\r"],[0,"\n\t{"],[-1,"\r"],[0,"\n\t\ti"]],"start1":9289,"start2":9289,"length1":13,"length2":11},{"diffs":[[0," false;}"],[-1,"\r"],[0,"\n\t\t$('[t"]],"start1":9324,"start2":9324,"length1":17,"length2":16},{"diffs":[[0,"to',to);"],[-1,"\r"],[0,"\n\t\t$('#t"]],"start1":9374,"start2":9374,"length1":17,"length2":16},{"diffs":[[0,"e();"],[-1,"\r"],[0,"\n\t}"],[-1,"\r"],[0,"\n};"]],"start1":9411,"start2":9411,"length1":12,"length2":10}]],"length":9421,"saved":false}
